# 🔐 セキュリティガイド - 秘密鍵の保護

## ✅ 安心してください！秘密鍵は漏れません

このプロジェクトは、秘密鍵がGitHubにアップロードされないように設計されています。

## 🛡️ 保護されている理由

### 1. `.gitignore`で保護

`.gitignore`ファイルに以下の設定があるため、機密情報を含むファイルはGitHubにアップロードされません：

```
# local env files
.env
.env*.local
```

**これにより、以下のファイルは自動的に除外されます：**
- `.env.local` - 秘密鍵やAPIキーを保存するファイル
- `.env` - 環境変数ファイル
- その他の`.env`で始まるファイル

### 2. 秘密鍵はコードに含まれていません

このプロジェクトでは、秘密鍵は以下の方法で管理されています：

- ✅ **環境変数として設定** - コードには含まれません
- ✅ **`.env.local`ファイルに保存** - GitHubにアップロードされません
- ✅ **Vercelの環境変数で管理** - 本番環境ではVercelで設定

### 3. コード内に秘密鍵がハードコードされていない

コード内を確認した結果：
- ❌ 秘密鍵がコードに直接書かれていない
- ❌ 秘密鍵がGitHubにアップロードされるファイルに含まれていない
- ✅ すべての機密情報は環境変数で管理されている

## 📋 GitHubにアップロードされるファイル

### ✅ アップロードされるファイル（安全）

- ソースコード（`.ts`, `.tsx`, `.js`など）
- 設定ファイル（`package.json`, `next.config.js`など）
- ドキュメント（`.md`ファイル）
- コンポーネントやフック

### ❌ アップロードされないファイル（保護されている）

- `.env.local` - 秘密鍵やAPIキー
- `.env` - 環境変数
- `node_modules/` - 依存関係（再インストール可能）
- `.next/` - ビルドファイル（再ビルド可能）

## 🔍 確認方法

### GitHubにアップロードする前に確認

1. **`.env.local`ファイルが存在するか確認**
   ```bash
   # このファイルは存在するはずですが、GitHubにはアップロードされません
   ```

2. **`.gitignore`を確認**
   - `.env.local`が含まれていることを確認

3. **GitHubにプッシュする前に確認**
   ```bash
   # アップロードされるファイルを確認（オプション）
   git status
   ```

### もし`.env.local`が表示された場合

もし`git status`で`.env.local`が表示された場合は：

```bash
# .gitignoreに追加されているか確認
# 既に追加されているはずですが、念のため確認
```

## ⚠️ 重要な注意事項

### 絶対にやってはいけないこと

1. ❌ **秘密鍵をコードに直接書く**
   ```typescript
   // 絶対にやらない！
   const privateKey = "0x1234..."; // ← これは危険！
   ```

2. ❌ **`.env.local`をGitHubにコミットする**
   ```bash
   # 絶対にやらない！
   git add .env.local  # ← これは危険！
   ```

3. ❌ **秘密鍵をGitHubのコメントやIssueに書く**

### 正しい方法

1. ✅ **環境変数として設定**
   ```bash
   # ローカル開発
   # .env.localファイルに記述（GitHubにアップロードされない）
   PRIVATE_KEY=your_private_key_here
   ```

2. ✅ **Vercelの環境変数で設定**
   - Vercelのダッシュボードで設定
   - コードには含まれない

## 🔐 このプロジェクトでの秘密鍵の使い方

### 秘密鍵が必要な場面

秘密鍵は**コントラクトのデプロイ時のみ**必要です：
- ローカルでコントラクトをデプロイする場合
- コントラクトをデプロイするスクリプトを実行する場合

### フロントエンド（Webアプリ）では不要

- ✅ ユーザーは自分のウォレット（MetaMaskなど）を使用
- ✅ アプリ側で秘密鍵を扱うことはありません
- ✅ すべてのトランザクションはユーザーのウォレットから署名されます

## 📝 チェックリスト

GitHubにアップロードする前に確認：

- [ ] `.env.local`ファイルが存在する（これは正常です）
- [ ] `.gitignore`に`.env.local`が含まれている
- [ ] `git status`で`.env.local`が表示されない
- [ ] コード内に秘密鍵が直接書かれていない
- [ ] 秘密鍵がコメントやドキュメントに含まれていない

## 🎯 まとめ

**結論：秘密鍵は漏れません！**

理由：
1. `.gitignore`で`.env.local`が除外されている
2. コード内に秘密鍵が含まれていない
3. フロントエンドアプリでは秘密鍵を使用しない

安心してGitHubにアップロードしてください！

## 💡 追加のセキュリティ対策（オプション）

さらに安全にしたい場合：

1. **GitHubリポジトリをPrivateにする**
   - リポジトリ設定で「Private」を選択

2. **秘密鍵を別の場所にバックアップ**
   - パスワードマネージャーに保存
   - 安全な場所にメモ

3. **定期的に秘密鍵を確認**
   - 定期的にウォレットの残高を確認
   - 不審な取引がないか確認

